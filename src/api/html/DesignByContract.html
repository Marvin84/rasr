<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Sprint: Design by Contract</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sprint
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Design by Contract </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Copyright 2020 RWTH Aachen University.</p>
<p>All rights reserved.</p>
<p>Licensed under the RWTH ASR License (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at </p><pre class="fragment">http://www.hltpr.rwth-aachen.de/rwth-asr/rwth-asr-license.html
</pre><p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="Assertions_8hh.html" title="Design by Contract support functions. ">Assertions.hh</a></dd></dl>
<ul>
<li>Q: I get a precondition violation in somebody else's code. Why? A: A precondition violation is caused by a <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a> statement. The meaning of such a statement line <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require(foo)</a> is: The function must not be called unless the expression "foo" is true. The caller is obliged to satisfy "foo", the callee may rely on this. So a precondition violation means, there is a bug in your (or some intermediate) code. Find it and make sure "foo" holds.</li>
<li>Q: I get a postcondition or assertion violation in somebody else's code. Why? A: The kind of violations are caused by <a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a>, <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a> and <a class="el" href="Assertions_8hh.html#a53abbe0948aa9d052aecd95684b68190" title="Program has a defect. ">defect()</a> statements. They all state some proposition by the author about the correct functioning of his code. If any of them fails, the author has made an error and it's time to fix this.</li>
</ul>
<p>Now to some more thorough explanation: (Most of the following material is based on chapter 11 of "Object
Oriented Software Construction, 2nd ed." by Bertrand Meyer, which is quite rewarding to read.)</p>
<ul>
<li>An <em>error</em> is a wrong decision made by the developer or user. An error during development leads to a defect (see below). An error by the user leads to a failure.</li>
<li>A <em>defect</em> (often called bug) is a property of the program code, causing the executable to deviate from its intended behaviour (so-called failure).</li>
<li>A <em>failure</em> (aka runtime error) is an event of the program deviating from its intended behaviour. Failures may be caused by defects, user errors or exceptional events (e.g. disk full).</li>
<li>An <em>assertions</em> is a proposition about the correct behaviour of the programme. If an assertions does not hold this indicates the presence of a defect. It is wrong to use assertions to state anything which is not knowable at compile time.</li>
</ul>
<p>The basic idea is to view the relation between classes as a client-supplier relationship. The interface of a function or class is a contract between these parties, which states their mutual obligations. The obligations of the client, i.e. the caller, are called preconditions; they must be satisfied before the function is called. The supplier, i.e. the called function, benefits from its preconditions, because it may rely on them. The obligations of the callee are called postconditions; they must be fulfilled when the function returns.</p>
<p>Preconditions and postconditions are two types of assertions. If under any circumstances an assertion does not hold, this indicates a defect. Therefore it is very useful to test all assertions during program execution. To declare a precondition, use the <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a> macro; to declare a postcondition, use <a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a>. Other assertions can be declared using <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a>. Conceptually pre- and postconditions are part of the functions interface, but in C++ we can only embed them in the function code. Function argument types and return types can also be considered pre- and postconditions respectively, but they are checked statically by the compiler. <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a>, <a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a> and <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a> all take a boolean expression as argument and abort execution immediatelly with an error message, when it evaluates to false.</p>
<dl class="section warning"><dt>Warning</dt><dd>Remember that assertions must NEVER have SIDE-EFFECTS.</dd></dl>
<p>The use of assertions resembles a formal proof of correctness: Preconditions (<a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a>) correspond to the presumptions, <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a> assertions denote the intermediate steps of the proof, and postconditions (<a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a>) state the proposition to be proved.</p>
<p>In an ideal world where computers are infinitely fast, we would check all assertions all the time. However in the real world we cannot afford to do that. But not checking them would defeat their purpose and their benefits (especially quick detection and spotting of errors). As D. Knuth (supposedly) put it: "Switching off checks in a production version, is like wearing a life jacket on the shore, and leaving it behind when going to the sea." In consequence Sprint adopts a three way build system:</p><ul>
<li>the release verion checks no assertions at all. Maximum speed, maximum risk</li>
<li>the standard version checks most assertions, except for those incurring a significant performance penalty. High speed, moderate risk.</li>
<li>the debug version checks all assertions all the time, but may be horribly slow. No risk, no fun.</li>
</ul>
<p>Normally you should use the normal <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a>, <a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a> and <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a> macros. If you find, that they slow down you program significantly (by more than 1% as rule of thumb), use the underscore versions require_(), ensure_() and verify_(), which are only checked in the debug version.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="Assertions_8hh.html" title="Design by Contract support functions. ">Assertions.hh</a></dd></dl>
<ul>
<li>Q: I get a precondition violation in somebody else's code. Why? A: A precondition violation is caused by a <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a> statement. The meaning of such a statement line <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require(foo)</a> is: The function must not be called unless the expression "foo" is true. The caller is obliged to satisfy "foo", the callee may rely on this. So a precondition violation means, there is a bug in your (or some intermediate) code. Find it and make sure "foo" holds.</li>
<li>Q: I get a postcondition or assertion violation in somebody else's code. Why? A: The kind of violations are caused by <a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a>, <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a> and <a class="el" href="Assertions_8hh.html#a53abbe0948aa9d052aecd95684b68190" title="Program has a defect. ">defect()</a> statements. They all state some proposition by the author about the correct functioning of his code. If any of them fails, the author has made an error and it's time to fix this.</li>
</ul>
<p>Now to some more thorough explanation: (Most of the following material is based on chapter 11 of "Object
Oriented Software Construction, 2nd ed." by Bertrand Meyer, which is quite rewarding to read.)</p>
<ul>
<li>An <em>error</em> is a wrong decision made by the developer or user. An error during development leads to a defect (see below). An error by the user leads to a failure.</li>
<li>A <em>defect</em> (often called bug) is a property of the program code, causing the executable to deviate from its intended behaviour (so-called failure).</li>
<li>A <em>failure</em> (aka runtime error) is an event of the program deviating from its intended behaviour. Failures may be caused by defects, user errors or exceptional events (e.g. disk full).</li>
<li>An <em>assertions</em> is a proposition about the correct behaviour of the programme. If an assertions does not hold this indicates the presence of a defect. It is wrong to use assertions to state anything which is not knowable at compile time.</li>
</ul>
<p>The basic idea is to view the relation between classes as a client-supplier relationship. The interface of a function or class is a contract between these parties, which states their mutual obligations. The obligations of the client, i.e. the caller, are called preconditions; they must be satisfied before the function is called. The supplier, i.e. the called function, benefits from its preconditions, because it may rely on them. The obligations of the callee are called postconditions; they must be fulfilled when the function returns.</p>
<p>Preconditions and postconditions are two types of assertions. If under any circumstances an assertion does not hold, this indicates a defect. Therefore it is very useful to test all assertions during program execution. To declare a precondition, use the <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a> macro; to declare a postcondition, use <a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a>. Other assertions can be declared using <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a>. Conceptually pre- and postconditions are part of the functions interface, but in C++ we can only embed them in the function code. Function argument types and return types can also be considered pre- and postconditions respectively, but they are checked statically by the compiler. <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a>, <a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a> and <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a> all take a boolean expression as argument and abort execution immediatelly with an error message, when it evaluates to false.</p>
<dl class="section warning"><dt>Warning</dt><dd>Remember that assertions must NEVER have SIDE-EFFECTS.</dd></dl>
<p>The use of assertions resembles a formal proof of correctness: Preconditions (<a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a>) correspond to the presumptions, <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a> assertions denote the intermediate steps of the proof, and postconditions (<a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a>) state the proposition to be proved.</p>
<p>In an ideal world where computers are infinitely fast, we would check all assertions all the time. However in the real world we cannot afford to do that. But not checking them would defeat their purpose and their benefits (especially quick detection and spotting of errors). As D. Knuth (supposedly) put it: "Switching off checks in a production version, is like wearing a life jacket on the shore, and leaving it behind when going to the sea." In consequence Sprint adopts a three way build system:</p><ul>
<li>the release verion checks no assertions at all. Maximum speed, maximum risk</li>
<li>the standard version checks most assertions, except for those incurring a significant performance penalty. High speed, moderate risk.</li>
<li>the debug version checks all assertions all the time, but may be horribly slow. No risk, no fun.</li>
</ul>
<p>Normally you should use the normal <a class="el" href="Assertions_8hh.html#ae925d7587e34145cd52f674b2012539a" title="Check precondition. ">require()</a>, <a class="el" href="Assertions_8hh.html#a0a6432d768e4a040089ea8b3c8b6b4f0" title="Check postcondition. ">ensure()</a> and <a class="el" href="Assertions_8hh.html#aecaddce56c58fa07fb91249ea5de89ae" title="Check assertion. ">verify()</a> macros. If you find, that they slow down you program significantly (by more than 1% as rule of thumb), use the underscore versions require_(), ensure_() and verify_(), which are only checked in the debug version. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
